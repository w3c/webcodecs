<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>WebCodecs Codec Registry</title>
  <meta content="NOTE-ED" name="w3c-status">
  <link href="https://www.w3.org/StyleSheets/TR/2021/W3C-ED" rel="stylesheet">
  <meta content="Bikeshed version b25686b9f, updated Fri Mar 14 14:15:20 2025 -0700" name="generator">
  <link href="https://www.w3.org/TR/webcodecs-codec-registry/" rel="canonical">
  <meta content="70892e0e707636452b701469533d14e5fc5eab12" name="revision">
  <meta content="dark light" name="color-scheme">
  <link href="https://www.w3.org/StyleSheets/TR/2021/dark.css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css">
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2021/logos/W3C" width="72"> </a> </p>
   <h1 class="p-name no-ref" id="title">WebCodecs Codec Registry</h1>
   <p id="w3c-state"><a href="https://www.w3.org/standards/types/#ED">Editor’s Draft</a>, <time class="dt-updated" datetime="2025-05-14">14 May 2025</time></p>
   <details open>
    <summary>More details about this document</summary>
    <div data-fill-with="spec-metadata">
     <dl>
      <dt>This version:
      <dd><a class="u-url" href="https://w3c.github.io/webcodecs/codec_registry.html">https://w3c.github.io/webcodecs/codec_registry.html</a>
      <dt>Latest published version:
      <dd><a href="https://www.w3.org/TR/webcodecs-codec-registry/">https://www.w3.org/TR/webcodecs-codec-registry/</a>
      <dt>Feedback:
      <dd><a href="https://github.com/w3c/webcodecs/issues/">GitHub</a>
      <dt class="editor">Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="62410"><span class="p-name fn">Paul Adenot</span> (<a class="p-org org" href="https://www.mozilla.org/">Mozilla</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="139375"><span class="p-name fn">Eugene Zemtsov</span> (<a class="p-org org" href="https://www.google.com/">Google LLC</a>)
      <dt class="editor">Former Editors:
      <dd class="editor p-author h-card vcard" data-editor-id="65611"><span class="p-name fn">Bernard Aboba</span> (<a class="p-org org" href="https://www.microsoft.com/">Microsoft Corporation</a>)
      <dd class="editor p-author h-card vcard" data-editor-id="114832"><span class="p-name fn">Chris Cunningham</span> (<a class="p-org org" href="https://www.google.com/">Google Inc.</a>)
      <dt>Participate:
      <dd><a href="https://github.com/w3c/webcodecs">Git Repository.</a>
      <dd><a href="https://github.com/w3c/webcodecs/issues/new">File an issue.</a>
      <dt>Version History:
      <dd><a href="https://github.com/w3c/webcodecs/commits">https://github.com/w3c/webcodecs/commits</a>
     </dl>
    </div>
   </details>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/policies/#copyright">Copyright</a> © 2025 <a href="https://www.w3.org/">World Wide Web Consortium</a>. <abbr title="World Wide Web Consortium">W3C</abbr><sup>®</sup> <a href="https://www.w3.org/policies/#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/policies/#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/copyright/software-license/" rel="license" title="W3C Software and Document License">permissive document license</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This registry is intended to enhance interoperability among
implementations and users of <a data-link-type="biblio" href="#biblio-webcodecs" title="WebCodecs">[WEBCODECS]</a>. In particular, this
registry provides the means to identify and avoid collisions among codec
strings and provides a mechanism to define codec-specific members of <a data-link-type="biblio" href="#biblio-webcodecs" title="WebCodecs">[WEBCODECS]</a> codec configuration dictionaries.</p>
   <p>This registry is not intended to include any information on whether a codec
format is encumbered by intellectual property claims. Implementers and
users are advised to seek appropriate legal counsel in this matter if they
intend to implement or use a specific codec format. Implementers of
WebCodecs are not required to support any particular codec nor registry
entry.</p>
   <p>This registry is non-normative.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="sotd"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> <em>This section describes the status of this document at the time of its publication. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision of this technical report can be found in the <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> standards and drafts index</a> at https://www.w3.org/TR/.</em> </p>
   <p> Feedback and comments on this specification are welcome. <a href="https://github.com/w3c/webcodecs/issues">GitHub Issues</a> are preferred for discussion on this specification. Alternatively, you can send comments to the Media Working Group’s mailing-list, <a href="mailto:public-media-wg@w3.org">public-media-wg@w3.org</a> (<a href="https://lists.w3.org/Archives/Public/public-media-wg/">archives</a>).
  This draft highlights some of the pending issues that are still to be discussed in the working group.
  No decision has been taken on the outcome of these issues including whether they are valid. </p>
   <p> This document was published by the <a href="https://www.w3.org/groups/wg/media/">Media Working Group</a> as an Editor’s Draft.
  The group does not expect this document to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation. </p>
   <p> Publication as an Editor’s Draft does not imply endorsement by <abbr title="World Wide Web Consortium">W3C</abbr> and its Members. </p>
   <p data-deliverer="115198"> The <a href="https://www.w3.org/policies/patent-policy/">W3C Patent Policy</a> does not carry any licensing requirements or commitments on this document. </p>
   <p> This document is governed by the <a href="https://www.w3.org/policies/process/20231103/" id="w3c_process_revision">03 November 2023 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li><a href="#organization"><span class="secno">1</span> <span class="content">Organization</span></a>
    <li><a href="#registration-entry-requirements"><span class="secno">2</span> <span class="content">Registration Entry Requirements</span></a>
    <li><a href="#audio-codec-registry"><span class="secno">3</span> <span class="content">Audio Codec Registry</span></a>
    <li><a href="#video-codec-registry"><span class="secno">4</span> <span class="content">Video Codec Registry</span></a>
    <li><a href="#privacy-considerations"><span class="secno">5</span> <span class="content">Privacy Considerations</span></a>
    <li><a href="#security-considerations"><span class="secno">6</span> <span class="content">Security Considerations</span></a>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <h2 class="heading settled" data-level="1" id="organization"><span class="secno">1. </span><span class="content">Organization</span><a class="self-link" href="#organization"></a></h2>
   <p>This registry maintains a mapping between <a data-link-type="dfn" href="https://w3c.github.io/webcodecs/#codec-string" id="ref-for-codec-string">codec strings</a> and registration
specifications as described below.</p>
   <h2 class="heading settled" data-level="2" id="registration-entry-requirements"><span class="secno">2. </span><span class="content">Registration Entry Requirements</span><a class="self-link" href="#registration-entry-requirements"></a></h2>
   <ol>
    <li data-md>
     <p>Each entry must include a unique <a data-link-type="dfn" href="https://w3c.github.io/webcodecs/#codec-string" id="ref-for-codec-string①">codec string</a>, a common name string, and a
link to the codec’s specification.</p>
    <li data-md>
     <p>The <a data-link-type="dfn" href="https://w3c.github.io/webcodecs/#codec-string" id="ref-for-codec-string②">codec string</a> must be crafted as follows:</p>
     <ol>
      <li data-md>
       <p>If the <a data-link-type="dfn" href="https://w3c.github.io/webcodecs/#codec-string" id="ref-for-codec-string③">codec string</a> contains a fixed prefix with variable suffix values,
the suffix must be represented by an asterisk and the registration’s
public specification must describe how to fully qualify the variable
portion of the string.</p>
      <li data-md>
       <p>Otherwise, if the codec is recognized by multiple strings, a single
preferred string should be listed and the registration’s specification
must list the other allowed strings.</p>
      <li data-md>
       <p>Otherwise, the codec is identified by a simple fixed string.</p>
     </ol>
    <li data-md>
     <p>Each registration’s specification must include a sequence of sections
describing:</p>
     <ol>
      <li data-md>
       <p>Recognized codec strings</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#encodedaudiochunk" id="ref-for-encodedaudiochunk">EncodedAudioChunk</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#encodedvideochunk" id="ref-for-encodedvideochunk">EncodedVideoChunk</a></code> internal data</p>
      <li data-md>
       <p><code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#dictdef-audiodecoderconfig" id="ref-for-dictdef-audiodecoderconfig">AudioDecoderConfig</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#dictdef-videodecoderconfig" id="ref-for-dictdef-videodecoderconfig">VideoDecoderConfig</a></code> description bytes</p>
      <li data-md>
       <p>Expectations for <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#encodedaudiochunk" id="ref-for-encodedaudiochunk①">EncodedAudioChunk</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#encodedvideochunk" id="ref-for-encodedvideochunk①">EncodedVideoChunk</a></code> <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#dom-encodedvideochunk-type-slot" id="ref-for-dom-encodedvideochunk-type-slot">[[type]]</a></code></p>
     </ol>
    <li data-md>
     <p>Where applicable, a registration specification may include a section
describing extensions to <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#dictdef-videoencoderconfig" id="ref-for-dictdef-videoencoderconfig">VideoEncoderConfig</a></code> or <code class="idl"><a data-link-type="idl" href="https://w3c.github.io/webcodecs/#dictdef-audioencoderconfig" id="ref-for-dictdef-audioencoderconfig">AudioEncoderConfig</a></code> dictionaries.</p>
    <li data-md>
     <p>Candidate entries must be announced by filing an issue in the <a href="https://github.com/w3c/webcodecs/issues/">WebCodecs GitHub issue tracker</a> so they can be discussed and evaluated for compliance before being added to
the registry. The Media Working Group may seek expertise from outside the
Working Group as part of its evaluation, e.g., from the codec specification
editors or relevant standards group. If the codec specification is not
publicly available, it must be made available to the Working Group for
evaluation. If the Working Group reaches consensus to accept the candidate,
a pull request should be drafted (either by editors or by the party
requesting the candidate registration) to register the candidate.
The registry editors will review and merge the pull request.</p>
    <li data-md>
     <p>Existing entries cannot be deleted or deprecated. They may be changed after
being published through the same process as candidate entries. Possible
changes include expansion of the <a data-link-type="dfn" href="https://w3c.github.io/webcodecs/#codec-string" id="ref-for-codec-string④">codec string</a> to better qualify the codec,
adjustments to the codec name string, and modification of the link to the
codec’s specification.</p>
   </ol>
   <h2 class="heading settled" data-level="3" id="audio-codec-registry"><span class="secno">3. </span><span class="content">Audio Codec Registry</span><a class="self-link" href="#audio-codec-registry"></a></h2>
   <table class="data">
    <tbody>
     <tr>
      <td><strong>codec string</strong>
      <td><strong>common name</strong>
      <td><strong>public specification</strong>
     <tr>
      <td>flac
      <td>Flac
      <td><a href="https://www.w3.org/TR/webcodecs-flac-codec-registration/">FLAC codec registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-flac-codec-registration" title="FLAC WebCodecs Registration">[WEBCODECS-FLAC-CODEC-REGISTRATION]</a>
     <tr>
      <td>mp3
      <td>MP3
      <td><a href="https://www.w3.org/TR/webcodecs-mp3-codec-registration/">MP3 WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-mp3-codec-registration" title="MP3 WebCodecs Registration">[WEBCODECS-MP3-CODEC-REGISTRATION]</a>
     <tr>
      <td>mp4a.*
      <td>AAC
      <td><a href="https://www.w3.org/TR/webcodecs-aac-codec-registration/">AAC WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-aac-codec-registration" title="AAC WebCodecs Registration">[WEBCODECS-AAC-CODEC-REGISTRATION]</a>
     <tr>
      <td>opus
      <td>Opus
      <td><a href="https://www.w3.org/TR/webcodecs-opus-codec-registration/">Opus WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-opus-codec-registration" title="Opus WebCodecs Registration">[WEBCODECS-OPUS-CODEC-REGISTRATION]</a>
     <tr>
      <td>vorbis
      <td>Vorbis
      <td><a href="https://www.w3.org/TR/webcodecs-vorbis-codec-registration/">Vorbis WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-vorbis-codec-registration" title="Vorbis WebCodecs Registration">[WEBCODECS-VORBIS-CODEC-REGISTRATION]</a>
     <tr>
      <td>ulaw
      <td>u-law PCM
      <td><a href="https://www.w3.org/TR/webcodecs-ulaw-codec-registration/">u-law PCM WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-ulaw-codec-registration" title="u-law PCM WebCodecs Registration">[WEBCODECS-ULAW-CODEC-REGISTRATION]</a>
     <tr>
      <td>alaw
      <td>A-law PCM
      <td><a href="https://www.w3.org/TR/webcodecs-alaw-codec-registration/">A-law PCM WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-alaw-codec-registration" title="A-law PCM WebCodecs Registration">[WEBCODECS-ALAW-CODEC-REGISTRATION]</a>
     <tr>
      <td>pcm-*
      <td>Linear PCM
      <td><a href="https://www.w3.org/TR/webcodecs-pcm-codec-registration/">Linear PCM WebCodecs
      Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-pcm-codec-registration" title="Linear PCM WebCodecs Registration">[WEBCODECS-PCM-CODEC-REGISTRATION]</a>
   </table>
   <h2 class="heading settled" data-level="4" id="video-codec-registry"><span class="secno">4. </span><span class="content">Video Codec Registry</span><a class="self-link" href="#video-codec-registry"></a></h2>
   <table class="data">
    <tbody>
     <tr>
      <td><strong>codec string</strong>
      <td><strong>common name</strong>
      <td><strong>specification</strong>
     <tr>
      <td>av01.*
      <td>AV1
      <td><a href="https://www.w3.org/TR/webcodecs-av1-codec-registration/">AV1 codec registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-av1-codec-registration" title="AV1 WebCodecs Registration">[WEBCODECS-AV1-CODEC-REGISTRATION]</a>
     <tr>
      <td>avc1.*, avc3.*
      <td>AVC / H.264
      <td><a href="https://www.w3.org/TR/webcodecs-avc-codec-registration/">AVC (H.264) WebCodecs Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-avc-codec-registration" title="AVC (H.264) WebCodecs Registration">[WEBCODECS-AVC-CODEC-REGISTRATION]</a>
     <tr>
      <td>hev1.*, hvc1.*
      <td>HEVC / H.265
      <td><a href="https://www.w3.org/TR/webcodecs-hevc-codec-registration/">HEVC (H.265) WebCodecs Registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-hevc-codec-registration" title="HEVC (H.265) WebCodecs Registration">[WEBCODECS-HEVC-CODEC-REGISTRATION]</a>
     <tr>
      <td>vp8
      <td>VP8
      <td><a href="https://www.w3.org/TR/webcodecs-vp8-codec-registration/">VP8 codec registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-vp8-codec-registration" title="VP8 WebCodecs Registration">[WEBCODECS-VP8-CODEC-REGISTRATION]</a>
     <tr>
      <td>vp09.*
      <td>VP9
      <td><a href="https://www.w3.org/TR/webcodecs-vp9-codec-registration/">VP9 codec registration</a> <a data-link-type="biblio" href="#biblio-webcodecs-vp9-codec-registration" title="VP9 WebCodecs Registration">[WEBCODECS-VP9-CODEC-REGISTRATION]</a>
   </table>
   <h2 class="heading settled" data-level="5" id="privacy-considerations"><span class="secno">5. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
   <p>Please refer to the section <a href="https://w3c.github.io/webcodecs/#privacy-considerations">Privacy
Considerations</a> in <a data-link-type="biblio" href="#biblio-webcodecs" title="WebCodecs">[WEBCODECS]</a>.</p>
   <h2 class="heading settled" data-level="6" id="security-considerations"><span class="secno">6. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
   <p>Please refer to the section <a href="https://w3c.github.io/webcodecs/#security-considerations">Security
Considerations</a> in <a data-link-type="biblio" href="#biblio-webcodecs" title="WebCodecs">[WEBCODECS]</a>.</p>
  </main>
  <script src="https://www.w3.org/scripts/TR/2021/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[WEBCODECS]</a> defines the following terms:
    <ul>
     <li><span class="dfn-paneled" id="08e6b53d">AudioDecoderConfig</span>
     <li><span class="dfn-paneled" id="c3b0b371">AudioEncoderConfig</span>
     <li><span class="dfn-paneled" id="ddafb265">EncodedAudioChunk</span>
     <li><span class="dfn-paneled" id="25947f98">EncodedVideoChunk</span>
     <li><span class="dfn-paneled" id="8d8392c1">VideoDecoderConfig</span>
     <li><span class="dfn-paneled" id="4c67f0b7">VideoEncoderConfig</span>
     <li><span class="dfn-paneled" id="89df1b66">[[type]]</span>
     <li><span class="dfn-paneled" id="d8757731">Codec String</span>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-webcodecs">[WEBCODECS]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/"><cite>WebCodecs</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/">https://w3c.github.io/webcodecs/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-webcodecs-aac-codec-registration">[WEBCODECS-AAC-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/aac_codec_registration.html"><cite>AAC WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/aac_codec_registration.html">https://w3c.github.io/webcodecs/aac_codec_registration.html</a>
   <dt id="biblio-webcodecs-alaw-codec-registration">[WEBCODECS-ALAW-CODEC-REGISTRATION]
   <dd>Paul Adenot; Bernard Aboba. <a href="https://w3c.github.io/webcodecs/alaw_codec_registration.html"><cite>A-law PCM WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/alaw_codec_registration.html">https://w3c.github.io/webcodecs/alaw_codec_registration.html</a>
   <dt id="biblio-webcodecs-av1-codec-registration">[WEBCODECS-AV1-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/av1_codec_registration.html"><cite>AV1 WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/av1_codec_registration.html">https://w3c.github.io/webcodecs/av1_codec_registration.html</a>
   <dt id="biblio-webcodecs-avc-codec-registration">[WEBCODECS-AVC-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/avc_codec_registration.html"><cite>AVC (H.264) WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/avc_codec_registration.html">https://w3c.github.io/webcodecs/avc_codec_registration.html</a>
   <dt id="biblio-webcodecs-flac-codec-registration">[WEBCODECS-FLAC-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/flac_codec_registration.html"><cite>FLAC WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/flac_codec_registration.html">https://w3c.github.io/webcodecs/flac_codec_registration.html</a>
   <dt id="biblio-webcodecs-hevc-codec-registration">[WEBCODECS-HEVC-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/hevc_codec_registration.html"><cite>HEVC (H.265) WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/hevc_codec_registration.html">https://w3c.github.io/webcodecs/hevc_codec_registration.html</a>
   <dt id="biblio-webcodecs-mp3-codec-registration">[WEBCODECS-MP3-CODEC-REGISTRATION]
   <dd>Paul Adenot; Bernard Aboba. <a href="https://w3c.github.io/webcodecs/mp3_codec_registration.html"><cite>MP3 WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/mp3_codec_registration.html">https://w3c.github.io/webcodecs/mp3_codec_registration.html</a>
   <dt id="biblio-webcodecs-opus-codec-registration">[WEBCODECS-OPUS-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/opus_codec_registration.html"><cite>Opus WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/opus_codec_registration.html">https://w3c.github.io/webcodecs/opus_codec_registration.html</a>
   <dt id="biblio-webcodecs-pcm-codec-registration">[WEBCODECS-PCM-CODEC-REGISTRATION]
   <dd>Paul Adenot; Bernard Aboba. <a href="https://w3c.github.io/webcodecs/pcm_codec_registration.html"><cite>Linear PCM WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/pcm_codec_registration.html">https://w3c.github.io/webcodecs/pcm_codec_registration.html</a>
   <dt id="biblio-webcodecs-ulaw-codec-registration">[WEBCODECS-ULAW-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/ulaw_codec_registration.html"><cite>u-law PCM WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/ulaw_codec_registration.html">https://w3c.github.io/webcodecs/ulaw_codec_registration.html</a>
   <dt id="biblio-webcodecs-vorbis-codec-registration">[WEBCODECS-VORBIS-CODEC-REGISTRATION]
   <dd>Paul Adenot; Bernard Aboba. <a href="https://w3c.github.io/webcodecs/vorbis_codec_registration.html"><cite>Vorbis WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/vorbis_codec_registration.html">https://w3c.github.io/webcodecs/vorbis_codec_registration.html</a>
   <dt id="biblio-webcodecs-vp8-codec-registration">[WEBCODECS-VP8-CODEC-REGISTRATION]
   <dd>Paul Adenot; Bernard Aboba. <a href="https://w3c.github.io/webcodecs/vp8_codec_registration.html"><cite>VP8 WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/vp8_codec_registration.html">https://w3c.github.io/webcodecs/vp8_codec_registration.html</a>
   <dt id="biblio-webcodecs-vp9-codec-registration">[WEBCODECS-VP9-CODEC-REGISTRATION]
   <dd>Paul Adenot; Eugene Zemtsov. <a href="https://w3c.github.io/webcodecs/vp9_codec_registration.html"><cite>VP9 WebCodecs Registration</cite></a>. URL: <a href="https://w3c.github.io/webcodecs/vp9_codec_registration.html">https://w3c.github.io/webcodecs/vp9_codec_registration.html</a>
  </dl>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"08e6b53d": {"dfnID":"08e6b53d","dfnText":"AudioDecoderConfig","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-audiodecoderconfig"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#dictdef-audiodecoderconfig"},
"25947f98": {"dfnID":"25947f98","dfnText":"EncodedVideoChunk","external":true,"refSections":[{"refs":[{"id":"ref-for-encodedvideochunk"},{"id":"ref-for-encodedvideochunk\u2460"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#encodedvideochunk"},
"4c67f0b7": {"dfnID":"4c67f0b7","dfnText":"VideoEncoderConfig","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-videoencoderconfig"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#dictdef-videoencoderconfig"},
"89df1b66": {"dfnID":"89df1b66","dfnText":"[[type]]","external":true,"refSections":[{"refs":[{"id":"ref-for-dom-encodedvideochunk-type-slot"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#dom-encodedvideochunk-type-slot"},
"8d8392c1": {"dfnID":"8d8392c1","dfnText":"VideoDecoderConfig","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-videodecoderconfig"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#dictdef-videodecoderconfig"},
"c3b0b371": {"dfnID":"c3b0b371","dfnText":"AudioEncoderConfig","external":true,"refSections":[{"refs":[{"id":"ref-for-dictdef-audioencoderconfig"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#dictdef-audioencoderconfig"},
"d8757731": {"dfnID":"d8757731","dfnText":"Codec String","external":true,"refSections":[{"refs":[{"id":"ref-for-codec-string"}],"title":"1. Organization"},{"refs":[{"id":"ref-for-codec-string\u2460"},{"id":"ref-for-codec-string\u2461"},{"id":"ref-for-codec-string\u2462"},{"id":"ref-for-codec-string\u2463"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#codec-string"},
"ddafb265": {"dfnID":"ddafb265","dfnText":"EncodedAudioChunk","external":true,"refSections":[{"refs":[{"id":"ref-for-encodedaudiochunk"},{"id":"ref-for-encodedaudiochunk\u2460"}],"title":"2. Registration Entry Requirements"}],"url":"https://w3c.github.io/webcodecs/#encodedaudiochunk"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"https://w3c.github.io/webcodecs/#codec-string": {"displayText":"Codec String","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"codec string","type":"dfn","url":"https://w3c.github.io/webcodecs/#codec-string"},
"https://w3c.github.io/webcodecs/#dictdef-audiodecoderconfig": {"displayText":"AudioDecoderConfig","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"AudioDecoderConfig","type":"dictionary","url":"https://w3c.github.io/webcodecs/#dictdef-audiodecoderconfig"},
"https://w3c.github.io/webcodecs/#dictdef-audioencoderconfig": {"displayText":"AudioEncoderConfig","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"AudioEncoderConfig","type":"dictionary","url":"https://w3c.github.io/webcodecs/#dictdef-audioencoderconfig"},
"https://w3c.github.io/webcodecs/#dictdef-videodecoderconfig": {"displayText":"VideoDecoderConfig","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"VideoDecoderConfig","type":"dictionary","url":"https://w3c.github.io/webcodecs/#dictdef-videodecoderconfig"},
"https://w3c.github.io/webcodecs/#dictdef-videoencoderconfig": {"displayText":"VideoEncoderConfig","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"VideoEncoderConfig","type":"dictionary","url":"https://w3c.github.io/webcodecs/#dictdef-videoencoderconfig"},
"https://w3c.github.io/webcodecs/#dom-encodedvideochunk-type-slot": {"displayText":"[[type]]","export":true,"for_":["EncodedVideoChunk"],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"[[type]]","type":"attribute","url":"https://w3c.github.io/webcodecs/#dom-encodedvideochunk-type-slot"},
"https://w3c.github.io/webcodecs/#encodedaudiochunk": {"displayText":"EncodedAudioChunk","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"EncodedAudioChunk","type":"interface","url":"https://w3c.github.io/webcodecs/#encodedaudiochunk"},
"https://w3c.github.io/webcodecs/#encodedvideochunk": {"displayText":"EncodedVideoChunk","export":true,"for_":[],"level":"1","normative":true,"shortname":"webcodecs","spec":"webcodecs","status":"current","text":"EncodedVideoChunk","type":"interface","url":"https://w3c.github.io/webcodecs/#encodedvideochunk"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const refHintKey = link.getAttribute("data-refhint-key");
    let key = url;
    if(refHintKey) {
        key = refHintKey + "_" + url;
    }
    const ref = refsData[key];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>